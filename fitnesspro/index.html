<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Gym Tracker</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Roboto:wght@300;400&display=swap"
        rel="stylesheet">
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- FIREBASE SDK (Compat) -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
</head>

<body>
    <!-- TOAST CONTAINER -->
    <div id="toast-container"></div>

    <!-- Sidebar Navigation -->
    <nav class="sidebar">
        <div class="logo" style="display:flex; align-items:center; gap:10px; margin-bottom:40px;">
            <i class="fa-solid fa-dumbbell" style="color:var(--primary);"></i> <span
                style="font-family:'Montserrat', sans-serif; letter-spacing:-1px;">FitTrack</span>
        </div>

        <div class="user-profile-mini" onclick="openProfileModal()" style="cursor:pointer;">
            <div class="avatar-circle">
                <i class="fa-solid fa-user"></i>
            </div>
            <div class="user-info">
                <span class="greeting">Hello, User</span>
                <span class="status">Free Plan</span>
            </div>
        </div>

        <ul class="nav-links">
            <li onclick="showPage('dashboard')" class="active-link" id="nav-dashboard">
                <i class="fa-solid fa-chart-pie"></i> <span>Dashboard</span>
            </li>
            <li onclick="showPage('dashboard'); openLogModal()" id="nav-log">
                <i class="fa-solid fa-dumbbell"></i> <span>Today Workout</span>
            </li>
            <li onclick="openToolsModal()" id="nav-tools">
                <i class="fa-solid fa-calculator"></i> <span>Tools</span>
            </li>
        </ul>

        <div class="sidebar-footer">
            <button onclick="logout()"
                style="background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); color:#94a3b8; width:100%; padding:10px; border-radius:10px; cursor:pointer; font-size:14px; display:flex; align-items:center; justify-content:center; gap:8px; transition:all 0.3s;"
                onmouseover="this.style.background='rgba(239, 68, 68, 0.1)'; this.style.color='#ef4444'; this.style.borderColor='#ef4444'"
                onmouseout="this.style.background='rgba(255,255,255,0.05)'; this.style.color='#94a3b8'; this.style.borderColor='rgba(255,255,255,0.1)'">
                <i class="fa-solid fa-arrow-right-from-bracket"></i> Log Out
            </button>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container">

        <!-- NEW HEADER BAR -->
        <div class="main-header">
            <button onclick="toggleSidebar()" id="menu-btn">
                <i class="fa-solid fa-bars-staggered"></i>
            </button>
            <h2 id="page-title">Dashboard</h2>
        </div>

        <!-- DASHBOARD PAGE -->
        <div id="dashboard" class="page active">
            <!-- MOTIVATION HEADER -->
            <div id="motivation-card"
                style="background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%); padding:25px; border-radius:20px; margin-bottom:30px; color:white; box-shadow:0 10px 20px -5px rgba(99, 102, 241, 0.4);">
                <div style="display:flex; justify-content:space-between; align-items:flex-start;">
                    <div>
                        <p id="greeting-text"
                            style="margin:0; font-size:14px; opacity:0.9; text-transform:uppercase; letter-spacing:1px; font-weight:600;">
                            Welcome Back</p>
                        <h1 style="margin:5px 0 0 0; font-size:28px; font-weight:800;">Time to Crush It! ðŸ’ª</h1>
                        <p id="quote-text" style="margin:10px 0 0 0; font-size:14px; opacity:0.9; font-style:italic;">
                            "The only bad workout is the one that didn't happen."</p>
                    </div>
                    <div
                        style="background:rgba(255,255,255,0.2); padding:10px 15px; border-radius:12px; text-align:center; backdrop-filter:blur(5px);">
                        <span style="font-size:12px; display:block; opacity:0.9;">Today</span>
                        <span id="date-display" style="font-size:16px; font-weight:700;">--</span>
                    </div>
                </div>
            </div>

            <!-- DASHBOARD SPLIT LAYOUT -->
            <div class="dashboard-split" style="display:grid; grid-template-columns: 2fr 1fr; gap:30px;">

                <!-- LEFT COLUMN: Data & Visualization -->
                <div class="main-content">

                    <!-- Stats Row (Compact) -->
                    <div class="stats-row" style="margin-bottom:25px;">
                        <div class="stat-box">
                            <div class="icon-bg" style="background:rgba(34, 197, 94, 0.1); color:#22c55e;"><i
                                    class="fa-solid fa-dumbbell"></i></div>
                            <div>
                                <h3>Workouts</h3>
                                <p id="total-workouts" style="color:#22c55e;">0</p>
                            </div>
                        </div>
                        <div class="stat-box">
                            <div class="icon-bg" style="background:rgba(59, 130, 246, 0.1); color:#3b82f6;"><i
                                    class="fa-solid fa-weight-scale"></i></div>
                            <div>
                                <h3>Weight</h3>
                                <p id="current-weight" style="color:#3b82f6;">--</p>
                            </div>
                        </div>
                        <!-- Calories/BMR Placeholder from Stats -->
                        <div class="stat-box">
                            <div class="icon-bg" style="background:rgba(234, 179, 8, 0.1); color:#eab308;"><i
                                    class="fa-solid fa-fire"></i></div>
                            <div>
                                <h3>Streak</h3>
                                <p id="streak-count" style="color:#eab308;">0</p>
                            </div>
                        </div>
                    </div>

                    <!-- Calendar -->
                    <div class="section-card" style="margin-bottom:25px; min-height:300px;">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                            <h2 style="margin:0; font-size:18px; display:flex; align-items:center; gap:10px;">
                                <i class="fa-regular fa-calendar-check" style="color:var(--primary);"></i> Activity Log
                            </h2>
                            <div
                                style="background:var(--bg); border-radius:30px; padding:4px; display:flex; align-items:center;">
                                <button onclick="changeMonth(-1)" class="round-btn">&lt;</button>
                                <span id="month-name"
                                    style="font-size:13px; font-weight:600; padding:0 15px; color:var(--text-muted);">Month</span>
                                <button onclick="changeMonth(1)" class="round-btn">&gt;</button>
                            </div>
                        </div>
                        <div id="calendar-grid" class="calendar-grid"></div>
                    </div>

                    <!-- PERSONAL PLAN (Hidden until generated) -->
                    <div id="dashboard-plan" class="section-card"
                        style="display:none; margin-bottom:25px; border-left:4px solid var(--primary);">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                            <h2 style="font-size:18px; margin:0;"><i class="fa-solid fa-clipboard-list"
                                    style="color:var(--primary); margin-right:8px;"></i> Your Plan</h2>
                            <button onclick="openProfileModal()"
                                style="background:none; border:none; color:var(--text-muted); cursor:pointer; font-size:12px;"><i
                                    class="fa-solid fa-pen"></i> Edit</button>
                        </div>

                        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                            <!-- Nutrition -->
                            <div style="background:rgba(255,255,255,0.05); padding:15px; border-radius:12px;">
                                <h4
                                    style="margin:0 0 5px 0; font-size:12px; text-transform:uppercase; color:var(--text-muted);">
                                    Daily Target</h4>
                                <div style="font-size:20px; font-weight:800; color:#fff; margin-bottom:5px;">
                                    <span id="dash-cals">--</span> kcal
                                </div>
                                <div style="font-size:11px; color:#cbd5e1; line-height:1.4;" id="dash-macros">
                                    P: -- â€¢ C: -- â€¢ F: --
                                </div>
                            </div>

                            <!-- Workout -->
                            <div
                                style="background:rgba(255,255,255,0.05); padding:15px; border-radius:12px; display:flex; flex-direction:column; justify-content:space-between;">
                                <div>
                                    <h4
                                        style="margin:0 0 5px 0; font-size:12px; text-transform:uppercase; color:var(--text-muted);">
                                        Strategy</h4>
                                    <div style="font-size:14px; font-weight:bold; color:var(--accent); margin-bottom:5px;"
                                        id="dash-workout-title">
                                        --
                                    </div>
                                    <div style="font-size:11px; color:#94a3b8; line-height:1.4;" id="dash-workout-desc">
                                        --
                                    </div>
                                </div>
                                <button onclick="openExerciseGuide()"
                                    style="margin-top:10px; background:rgba(34, 197, 94, 0.1); color:#22c55e; border:none; padding:6px 10px; border-radius:6px; cursor:pointer; font-size:11px; font-weight:600; width:100%;">
                                    View Guide <i class="fa-solid fa-arrow-right" style="margin-left:4px;"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Progress Chart -->
                    <div class="section-card">
                        <h2 style="font-size:18px; margin-bottom:15px;">Weight Progress</h2>

                        <!-- New Stats Header -->
                        <div class="weight-stats">
                            <div class="mini-stat">
                                <span class="label">Current</span>
                                <span class="value" id="stat-current">--</span>
                            </div>
                            <div class="mini-stat">
                                <span class="label">Start</span>
                                <span class="value" id="stat-start">--</span>
                            </div>
                            <div class="mini-stat">
                                <span class="label">Change</span>
                                <span class="value" id="stat-change">--</span>
                            </div>
                        </div>

                        <div class="chart-container" style="position:relative; height:200px;">
                            <canvas id="weightChart"></canvas>
                        </div>
                    </div>

                </div>

                <!-- RIGHT COLUMN: Actions & Updates -->
                <div class="side-content" style="display:flex; flex-direction:column; gap:25px;">

                    <!-- 1. QUICK ADD HERO (The Corner Action) -->
                    <div onclick="openLogModal()"
                        style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); padding:30px; border-radius:20px; color:white; cursor:pointer; text-align:center; box-shadow:0 10px 25px -5px rgba(34, 197, 94, 0.5); transition: transform 0.2s;"
                        onmouseover="this.style.transform='translateY(-5px)'"
                        onmouseout="this.style.transform='translateY(0)'">
                        <div
                            style="background:rgba(255,255,255,0.2); width:60px; height:60px; border-radius:50%; display:flex; align-items:center; justify-content:center; margin:0 auto 15px auto;">
                            <i class="fa-solid fa-plus" style="font-size:28px;"></i>
                        </div>
                        <h2 style="margin:0; font-size:20px; font-weight:800;">Today's Workout</h2>
                        <p style="margin:5px 0 0 0; opacity:0.9; font-size:14px;">Track your gains now</p>
                    </div>


                    <!-- Drink Section -->
                    <div class="section-card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                            <h2 style="font-size:18px; margin:0;">Drink</h2>
                            <span
                                style="font-size:12px; color:var(--text-muted); background:rgba(255,255,255,0.05); padding:4px 10px; border-radius:12px;">Daily
                                Goal: 8 Cups</span>
                        </div>

                        <div style="text-align:center; padding:10px 0;">
                            <div
                                style="font-size:42px; font-weight:800; color:#38bdf8; margin-bottom:5px; text-shadow:0 0 20px rgba(56, 189, 248, 0.3);">
                                <span id="water-count">0</span><span
                                    style="font-size:20px; color:var(--text-muted); font-weight:600;">/8</span>
                            </div>
                            <p
                                style="color:var(--text-muted); font-size:13px; margin-bottom:20px; letter-spacing:1px; text-transform:uppercase;">
                                cups today</p>

                            <div style="display:flex; justify-content:center; gap:20px;">
                                <button onclick="addWater()" class="primary-btn glow-effect"
                                    style="width:60px; height:60px; border-radius:50%; padding:0; display:flex; align-items:center; justify-content:center; background:#38bdf8; font-size:24px;"><i
                                        class="fa-solid fa-plus"></i></button>
                                <button onclick="resetWater()" class="primary-btn"
                                    style="width:60px; height:60px; border-radius:50%; padding:0; display:flex; align-items:center; justify-content:center; background:rgba(255,255,255,0.1); color:var(--text-muted); box-shadow:none;"><i
                                        class="fa-solid fa-arrow-rotate-right"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- 3. RECENT HISTORY -->
                    <div class="section-card" style="flex:1;">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                            <h3 style="margin:0; font-size:16px;">Recent</h3>
                            <button onclick="clearAllData()"
                                style="background:none; border:none; color:var(--danger); font-size:12px; cursor:pointer;">Clear</button>
                        </div>
                        <ul class="history-list" id="history-list" style="max-height:300px; overflow-y:auto;">
                            <li class="empty-msg" style="font-size:13px;">No workouts yet.</li>
                        </ul>
                    </div>

                    <!-- ALERTS -->
                    <div id="absent-alert"
                        style="display:none; background:linear-gradient(45deg, #ef4444, #b91c1c); padding:20px; border-radius:16px; color:white;">
                        <i class="fa-solid fa-fire-flame-curved"
                            style="font-size:24px; margin-bottom:10px; display:block;"></i>
                        <h3 style="margin:0; font-size:16px;">Streak Risk!</h3>
                        <p style="margin:5px 0 0 0; font-size:13px; opacity:0.9;"><span id="days-absent">0</span> days
                            missed.</p>
                    </div>

                </div>
            </div>
        </div>

        <!-- LOG PAGE (Removed content, keeping container clean or empty) -->
        <div id="log" class="page">

            <p>Use the dashboard to log workouts.</p>
        </div>

    </div>

    <!-- LOG MODAL -->
    <div id="log-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Quick Add Workout</h2>
                <button onclick="closeLogModal()"
                    style="background:none; color:#fff; font-size:24px; padding:0; margin:0; cursor:pointer;">&times;</button>
            </div>

            <form id="workout-form">
                <div class="form-group">
                    <label>Exercise Name</label>
                    <div class="input-icon-wrapper">
                        <i class="fa-solid fa-dumbbell"></i>
                        <input type="text" id="ex-name" placeholder="e.g. Bench Press" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Type</label>
                    <div class="input-icon-wrapper">
                        <i class="fa-solid fa-layer-group"></i>
                        <select id="ex-type">
                            <option>Strength</option>
                            <option>Cardio</option>
                            <option>Flexibility</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Sets</label>
                        <input type="number" id="ex-sets" placeholder="3" style="text-align:center;">
                    </div>
                    <div class="form-group">
                        <label>Reps</label>
                        <input type="number" id="ex-reps" placeholder="12" style="text-align:center;">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Weight (kg)</label>
                        <input type="number" id="ex-weight" placeholder="kg" style="text-align:center;">
                    </div>
                    <div class="form-group">
                        <label>Duration (min)</label>
                        <input type="number" id="ex-duration" placeholder="min" style="text-align:center;">
                    </div>
                </div>

                <button type="submit" class="primary-btn glow-effect"
                    style="width:100%; margin-top:15px; padding:12px;">
                    <i class="fa-solid fa-check"></i> Save Workout
                </button>
            </form>
        </div>
    </div>


    <!-- FEEDBACK MODAL (AI Coach) -->
    <div id="feedback-modal" class="modal-overlay">
        <div class="modal-content" style="text-align:center; max-width:400px;">
            <div style="margin-bottom:20px;">
                <div
                    style="width:70px; height:70px; background:rgba(34, 197, 94, 0.2); border-radius:50%; display:inline-flex; align-items:center; justify-content:center;">
                    <i class="fa-solid fa-check" style="color:var(--primary); font-size:32px;"></i>
                </div>
            </div>

            <h2 style="font-size:24px; margin:0 0 10px 0;">Great Session! ðŸ”¥</h2>
            <p style="color:var(--text-muted); font-size:14px; margin-bottom:25px;">Workout Logged Successfully</p>

            <!-- Analysis Box -->
            <div
                style="background:rgba(255,255,255,0.05); padding:15px; border-radius:12px; text-align:left; margin-bottom:20px; border-left:4px solid var(--accent);">
                <h4 style="margin:0 0 5px 0; color:var(--accent); display:flex; align-items:center; gap:8px;">
                    <i class="fa-solid fa-chart-line"></i> Analysis
                </h4>
                <p id="fb-analysis" style="font-size:13px; margin:0; line-height:1.5; color:#e2e8f0;">
                    Analysis text...
                </p>
            </div>

            <!-- Suggestion Box -->
            <div
                style="background:rgba(255,255,255,0.05); padding:15px; border-radius:12px; text-align:left; margin-bottom:25px; border-left:4px solid #f59e0b;">
                <h4 style="margin:0 0 5px 0; color:#f59e0b; display:flex; align-items:center; gap:8px;">
                    <i class="fa-solid fa-user-doctor"></i> Coach Tip
                </h4>
                <p id="fb-tip" style="font-size:13px; margin:0; line-height:1.5; color:#e2e8f0;">
                    Tip text...
                </p>
            </div>

            <button onclick="closeFeedbackModal()" class="primary-btn glow-effect" style="width:100%;">Awesome, Got
                it!</button>
        </div>
    </div>

    <!-- PROFILE MODAL -->
    <div id="profile-modal" class="modal-overlay">
        <div class="modal-content" style="max-width:800px; width:95%;">
            <div class="modal-header">
                <h2><i class="fa-solid fa-user-gear" style="color:var(--primary); margin-right:10px;"></i> My Profile
                </h2>
                <button onclick="closeProfileModal()"
                    style="background:none; color:#fff; font-size:24px; padding:0; margin:0; cursor:pointer;">&times;</button>
            </div>

            <div class="tools-grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
                <!-- User Details Card -->
                <div class="tool-card" style="margin:0;">
                    <h3><i class="fa-solid fa-id-card" style="color:var(--primary); margin-right:10px;"></i> Personal
                        Details</h3>
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="p-name" placeholder="Your Name">
                    </div>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                        <div class="form-group">
                            <label>Age</label>
                            <input type="number" id="p-age" placeholder="25">
                        </div>
                        <div class="form-group">
                            <label>Gender</label>
                            <select id="p-gender">
                                <option>Male</option>
                                <option>Female</option>
                            </select>
                        </div>
                    </div>

                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                        <div class="form-group">
                            <label>Activity Level</label>
                            <select id="p-activity">
                                <option value="1.2">Sedentary (Desk Job)</option>
                                <option value="1.375">Lightly Active</option>
                                <option value="1.55">Moderately Active</option>
                                <option value="1.725">Very Active (Athlete)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Experience</label>
                            <select id="p-experience">
                                <option value="Beginner">Beginner</option>
                                <option value="Intermediate">Intermediate</option>
                                <option value="Advanced">Advanced</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Diet Preference</label>
                        <select id="p-diet">
                            <option value="Anything">Anything</option>
                            <option value="Vegetarian">Vegetarian</option>
                            <option value="Vegan">Vegan</option>
                            <option value="Keto">Keto</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Main Goal</label>
                        <select id="p-goal">
                            <option value="loss">Weight Loss</option>
                            <option value="gain">Muscle Gain</option>
                            <option value="maintain">Maintenance</option>
                            <option value="endurance">Endurance</option>
                        </select>
                    </div>
                    <button onclick="saveProfile()" class="primary-btn glow-effect"
                        style="width:100%; margin-top:10px;">Save & Generate Plan</button>

                </div>

                <!-- Update Weight -->
                <div class="tool-card" style="margin:0;">
                    <h3><i class="fa-solid fa-scale-balanced" style="color:#f59e0b; margin-right:10px;"></i> Update
                        Weight</h3>
                    <div class="form-group">
                        <label>Current Body Weight (kg)</label>
                        <input type="number" id="my-weight" placeholder="e.g. 75.5">
                    </div>
                    <button onclick="saveWeight()" class="primary-btn glow-effect" style="background:#f59e0b;">Update
                        Progress</button>
                    <p style="font-size:12px; color:var(--text-muted); margin-top:15px; line-height:1.4;">
                        <i class="fa-solid fa-circle-info"></i> This will update your dashboard chart and help calculate
                        accurate calorie needs.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- TOOLS MODAL -->
    <div id="tools-modal" class="modal-overlay">
        <div class="modal-content" style="max-width:1000px; width:95%; max-height:90vh; overflow-y:auto;">
            <div class="modal-header">
                <h2><i class="fa-solid fa-calculator" style="color:var(--primary); margin-right:10px;"></i> Gym Tools
                </h2>
                <button onclick="closeToolsModal()"
                    style="background:none; color:#fff; font-size:24px; padding:0; margin:0; cursor:pointer;">&times;</button>
            </div>

            <div class="tools-grid">
                <!-- BMI Calculator -->
                <div class="tool-card">
                    <h3><i class="fa-solid fa-weight-scale" style="color:var(--primary); margin-right:10px;"></i> BMI
                        Calculator</h3>
                    <div class="form-group">
                        <label>Height (cm)</label>
                        <input type="number" id="bmi-h" placeholder="175">
                    </div>
                    <div class="form-group">
                        <label>Weight (kg)</label>
                        <input type="number" id="bmi-w" placeholder="70">
                    </div>
                    <button onclick="calcBMI()" class="primary-btn glow-effect">Calculate BMI</button>
                    <div id="bmi-res" class="result" style="display:none; margin-top:15px;">Result: --</div>
                </div>

                <!-- BMR Calculator -->
                <div class="tool-card">
                    <h3><i class="fa-solid fa-fire" style="color:var(--accent); margin-right:10px;"></i> Calorie Needs
                    </h3>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px; margin-bottom:15px;">
                        <div>
                            <label>Weight (kg)</label>
                            <input type="number" id="bmr-w" placeholder="70">
                        </div>
                        <div>
                            <label>Height (cm)</label>
                            <input type="number" id="bmr-h" placeholder="175">
                        </div>
                        <div>
                            <label>Age</label>
                            <input type="number" id="bmr-a" placeholder="25">
                        </div>
                        <div>
                            <label>Gender</label>
                            <select id="bmr-g">
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>
                    </div>
                    <button onclick="calcBMR()" class="primary-btn glow-effect"
                        style="background:var(--accent);">Calculate
                        BMR</button>
                    <div id="bmr-res" class="result"
                        style="display:none; margin-top:15px; color:var(--accent); background:rgba(56, 189, 248, 0.1);">
                        Result: --</div>
                </div>

                <!-- One Rep Max Calculator -->
                <div class="tool-card">
                    <h3><i class="fa-solid fa-dumbbell" style="color:#a855f7; margin-right:10px;"></i> 1 Rep Max (1RM)
                    </h3>
                    <div class="form-group">
                        <label>Lifted Weight (kg)</label>
                        <input type="number" id="orm-w" placeholder="e.g. 100">
                    </div>
                    <div class="form-group">
                        <label>Reps Performed</label>
                        <input type="number" id="orm-r" placeholder="e.g. 5">
                    </div>
                    <button onclick="calcORM()" class="primary-btn glow-effect" style="background:#a855f7;">Est. Max
                        Strength</button>
                    <div id="orm-res" class="result"
                        style="display:none; margin-top:15px; color:#a855f7; background:rgba(168, 85, 247, 0.1);">
                        Result: --
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    </div>

    <!-- LOGIN PAGE (Overlay) -->
    <!-- LOGIN PAGE (Overlay) -->
    <!-- LOGIN PAGE (Overlay) -->
    <div id="login-page"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:linear-gradient(135deg, #0f172a 0%, #1e293b 100%); z-index:3000; flex-direction:column; justify-content:center; align-items:center; text-align:center;">

        <!-- CARD CONTAINER -->
        <div
            style="background:rgba(255,255,255,0.05); padding:40px; border-radius:30px; border:1px solid rgba(255,255,255,0.1); backdrop-filter:blur(10px); width:90%; max-width:400px; box-shadow:0 20px 50px rgba(0,0,0,0.5);">

            <div
                style="width:80px; height:80px; background:linear-gradient(135deg, #22c55e 0%, #0ea5e9 100%); border-radius:50%; margin:0 auto 20px auto; display:flex; align-items:center; justify-content:center; font-size:32px; color:white; box-shadow:0 10px 20px rgba(34, 197, 94, 0.4);">
                <i class="fa-solid fa-dumbbell"></i>
            </div>
            <h1 style="font-size:28px; margin-bottom:5px;">FitTrack <span style="color:#22c55e;">Pro</span></h1>

            <!-- 1. LOGIN FORM (Default) -->
            <div id="auth-login">
                <p style="color:#94a3b8; margin-bottom:25px; font-size:14px;">Welcome back! Please login.</p>

                <div class="form-group" style="text-align:left; margin-bottom:15px;">
                    <label style="margin-left:5px; font-size:12px;">Username</label>
                    <div class="input-icon-wrapper">
                        <i class="fa-solid fa-user"></i>
                        <input type="text" id="login-user" placeholder="Enter username"
                            style="background:rgba(0,0,0,0.3); border-color:#334155;">
                    </div>
                </div>
                <div class="form-group" style="text-align:left; margin-bottom:25px;">
                    <label style="margin-left:5px; font-size:12px;">Password</label>
                    <div class="input-icon-wrapper">
                        <i class="fa-solid fa-lock"></i>
                        <input type="password" id="login-pass" placeholder="Enter password"
                            style="background:rgba(0,0,0,0.3); border-color:#334155;">
                    </div>
                </div>

                <button onclick="attemptLogin()" class="primary-btn glow-effect"
                    style="width:100%; padding:15px; font-size:16px;">
                    Log In <i class="fa-solid fa-arrow-right" style="margin-left:8px;"></i>
                </button>

                <p style="margin-top:20px; font-size:13px; color:#cbd5e1;">
                    New here? <span onclick="toggleAuthMode('signup')"
                        style="color:#22c55e; cursor:pointer; font-weight:bold;">Create Account</span>
                </p>
            </div>

            <!-- 2. SIGNUP FORM (Hidden) -->
            <div id="auth-signup" style="display:none;">
                <p style="color:#94a3b8; margin-bottom:20px; font-size:14px;">Create your profile.</p>

                <div class="form-group" style="text-align:left; margin-bottom:12px;">
                    <label style="margin-left:5px; font-size:11px;">Username</label>
                    <input type="text" id="signup-user" placeholder="Choose username"
                        style="background:rgba(0,0,0,0.3); border-color:#334155; padding:8px 12px; font-size:13px;">
                </div>

                <div class="form-group" style="text-align:left; margin-bottom:12px;">
                    <label style="margin-left:5px; font-size:11px;">Password</label>
                    <input type="password" id="signup-pass" placeholder="Choose password"
                        style="background:rgba(0,0,0,0.3); border-color:#334155; padding:8px 12px; font-size:13px;">
                </div>

                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-bottom:12px;">
                    <div class="form-group" style="text-align:left;">
                        <label style="margin-left:5px; font-size:11px;">Age</label>
                        <input type="number" id="signup-age" placeholder="25"
                            style="background:rgba(0,0,0,0.3); border-color:#334155; padding:8px; text-align:center;">
                    </div>
                    <div class="form-group" style="text-align:left;">
                        <label style="margin-left:5px; font-size:11px;">Gender</label>
                        <select id="signup-gender"
                            style="background:rgba(0,0,0,0.3); border-color:#334155; height:38px; padding:0 8px; font-size:13px;">
                            <option>Male</option>
                            <option>Female</option>
                            <option>Other</option>
                        </select>
                    </div>
                </div>

                <div class="form-group" style="text-align:left; margin-bottom:20px;">
                    <label style="margin-left:5px; font-size:11px;">Goal</label>
                    <select id="signup-goal" style="background:rgba(0,0,0,0.3); border-color:#334155; font-size:13px;">
                        <option value="loss">Weight Loss</option>
                        <option value="gain">Muscle Gain</option>
                        <option value="endurance">Endurance</option>
                    </select>
                </div>

                <button onclick="attemptSignup()" class="primary-btn glow-effect"
                    style="width:100%; padding:12px; font-size:15px;">
                    Sign Up <i class="fa-solid fa-user-plus" style="margin-left:8px;"></i>
                </button>

                <p style="margin-top:15px; font-size:13px; color:#cbd5e1;">
                    Already have an account? <span onclick="toggleAuthMode('login')"
                        style="color:#22c55e; cursor:pointer; font-weight:bold;">Log In</span>
                </p>
            </div>



        </div>
        <p style="margin-top:20px; color:#64748b; font-size:12px;">&copy; 2025 FitTrack Pro by Tilak</p>
    </div>

    <!-- CONFIRMATION MODAL -->
    <div id="confirm-modal" class="modal-overlay" style="z-index: 2000;">
        <div class="modal-content" style="max-width:400px; text-align:center; padding:30px;">
            <i class="fa-solid fa-circle-exclamation"
                style="font-size:40px; color:#ef4444; margin-bottom:15px; display:block;"></i>
            <h3 style="margin-bottom:10px;">Are you sure?</h3>
            <p id="confirm-msg" style="color:var(--text-muted); margin-bottom:25px;">Do you really want to delete this
                workout?</p>

            <div style="display:flex; gap:10px; justify-content:center;">
                <button onclick="closeConfirmModal(false)" class="primary-btn"
                    style="background:rgba(255,255,255,0.1); color:var(--text); box-shadow:none;">Cancel</button>
                <button id="confirm-yes-btn" onclick="closeConfirmModal(true)" class="primary-btn glow-effect"
                    style="background:#ef4444;">Delete</button>
            </div>
        </div>
    </div>

    <!-- EXERCISE GUIDE MODAL -->
    <div id="guide-details-modal" class="modal-overlay" style="z-index: 2500;">
        <div class="modal-content" style="max-width:600px; width:95%; max-height:90vh; overflow-y:auto;">
            <div class="modal-header">
                <h2 style="font-size:20px;"><i class="fa-solid fa-dumbbell"
                        style="color:var(--accent); margin-right:10px;"></i> <span id="guide-modal-title">Your
                        Routine</span></h2>
                <button onclick="document.getElementById('guide-details-modal').style.display='none'"
                    style="background:none; color:#fff; font-size:24px; padding:0; cursor:pointer;">&times;</button>
            </div>

            <p style="color:var(--text-muted); font-size:14px; margin-bottom:20px;" id="guide-modal-desc">
                Follow this routine for best results. Click on an exercise to see instructions.
            </p>

            <div id="guide-exercises-list" style="display:flex; flex-direction:column; gap:15px;">
                <!-- Exercises will be injected here -->
            </div>
        </div>
    </div>

    <script src="scripts/app.js"></script>
</body>

</html>